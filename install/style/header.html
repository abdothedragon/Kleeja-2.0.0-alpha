<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="{{echo getlang()}}" lang="{{echo getlang()}}" dir="{{echo $lang['DIR']}}">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>...Kleeja...</title><style type="text/css">
* { padding: 0;margin: 0;}
body {
background: #C8C8C8 url('style/images/body.png') top center no-repeat fixed;;
font: 0.74em "Tahoma" Verdana, Arial, sans-serif;line-height: 1.5em;
margin:0px auto; text-align: center
}
aligny {
float : {{echo $lang['DIR']=='ltr'?'left':'right'}}
}
input {color: #333333;font-family: "Tahoma", Verdana, Helvetica, sans-serif;font-size: 1.1em;font-weight: normal;padding: 1px;
border: 1px solid #A9B8C2;background-color: #FAFAFA;/* top right */-moz-border-radius-topright:10px;/* bottom left */-moz-border-radius-bottomleft:10px;}
select {-moz-border-radius: 8px; border-radius:1px;color: #333333; background-color: #FAFAFA;font-family: "Tahoma", Verdana, Helvetica, sans-serif;font-size: 1.1em;font-weight: normal;border: 1px solid #A9B8C2;padding: 1px;}
option { padding: 0 1em 0 0;}
img { border:0px } 

.home { margin: 15px 0;padding: 10px;border:0px ; position: relative;font: bold 12px tahoma, sans-serif;}

* html fieldset { padding: 0 10px 5px 10px;}
a {color: #3B6EBF;text-decoration: none;}a:hover {text-decoration: underline;}
legend
{
font-size: 2.5em;
color: #000;
background-color: #fff0d2;
padding: 13px 15px;
-moz-border-radius: 8px; border-radius:1px;
} 
.wz{-moz-border-radius: 8px; border-radius:1px;color: #333333; background-color: #FAFAFA;font-family: "Tahoma", Verdana, Helvetica, sans-serif;font-size: 1.1em;font-weight: normal;border: 1px solid #A9B8C2;padding: 1px;}

.ul_check,.ul_check2 { 
padding: 10px;
}
.ul_check li {
font-size: 1.2em;
line-height: 2.3em
}
.ul_check2 li {
font-size: 0.9em;
line-height: 2em
}
/*language step*/
ul#choose, ul#choose ul {
  margin: 0px;
  padding: 0px;
  list-style: none;
}

ul#choose li {
  display: inline;
  float: left;
  text-indent: 0px;
  margin: 2px;
}

ul#choose li a {
  display: block;
  text-decoration: none;
}

ul#choose li {
  width: 80px;
  height: 80px;
  line-height: 50px;
  background-position: 0 0; 
}

ul#choose img {
  width: 100%;
  height: 100%;
  border: 0;
  display: block;
}

#language_choose {
  text-align: center;
  margin:0 auto;
}


</style>
<script type="text/javascript" src="{{echo getjquerylink()}}"></script>
<script type="text/javascript">
	//<![CDATA[
	function agree ()
	{
		var agrec = document.getElementById('agrec');
		var agres = document.getElementById('agres');

		if (agrec.checked) { agres.disabled= '';}else{agres.disabled= 'disabled';}
	}

//	http://www.marketingtechblog.com/2007/08/27/javascript-password-strength/
function passwordChanged() 
{
	var strength = document.getElementById("strength");
	var strongRegex = new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$", "g");
	var mediumRegex = new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$", "g");
	var enoughRegex = new RegExp("(?=.{6,}).*", "g");
	var pwd = document.getElementById("password");
	
	if (pwd.value.length==0) 
	{
		strength.innerHTML =  '<img src="style/images/p1.gif" alt="! .." />';
	} 
	else if (false == enoughRegex.test(pwd.value)) 
	{
		strength.innerHTML = '<img src="style/images/p2.gif" alt="write more .." />';
	}
	else if (strongRegex.test(pwd.value)) 
	{
		strength.innerHTML = '<img src="style/images/p5.gif" alt="strong .." />';
	} 
	else if (mediumRegex.test(pwd.value))
	{
		strength.innerHTML = '<img src="style/images/p4.gif" alt="Medium .." />';
	} 
	else 
	{
		strength.innerHTML = '<img src="style/images/p3.gif" alt="Weak! .." />';
	}
}

function w_email(l)
{
		var m = document.getElementById(l);
		if (m.value.indexOf("@") == -1 ||m.value.indexOf(".") == -1 || m.value.length < 7 ) 
		{
			alert("{{echo $lang['WRONG_EMAIL']}}");
			m.focus();
		}
}

//By JavaScript Kit (http://javascriptkit.com)
function checkrequired(which)
{
	var pass	=	true;
	if (document.images)
	{
		for (i=0;i<which.length;i++)
		{
			var tempobj=which.elements[i]
			if (tempobj.name.substring(0,8)=="required")
			{
				if (((tempobj.type=="text"||tempobj.type=="textarea")&&tempobj.value=='')||(tempobj.type.toString().charAt(0)=="s" && tempobj.selectedIndex==-1))
				{
					pass	=	false;
					break
				}
			}
		}
	}
	if (!pass)
	{
		alert("{{echo $lang['VALIDATING_FORM_WRONG']}}");
		return false;
	}
	else
	{
		return true;
	}
}

// http://www.dynamicdrive.com/ 
function formCheck(formobj, fieldRequired)
{
	// dialog message
	var alertMsg = "{{echo $lang['VALIDATING_FORM_WRONG']}}:\n";
	var l_Msg = alertMsg.length;
	//lang
	var lang = new Array(9);
	lang["db_server"] = "{{echo $lang['DB_SERVER']}}";
	lang["db_user"] = "{{echo $lang['DB_USER']}}";
	lang["db_name"] = "{{echo $lang['DB_NAME']}}";
	lang["sitename"] = "{{echo $lang['SITENAME']}}";
	lang["siteurl"] = "{{echo $lang['SITEURL']}}";
	lang["sitemail"] = "{{echo $lang['SITEMAIL']}}";
	lang["username"] = "{{echo $lang['USERNAME']}}";
	lang["password"] = "{{echo $lang['PASSWORD']}}";
	lang["password2"] = "{{echo $lang['PASSWORD2']}}";
	lang["email"] = "{{echo $lang['EMAIL']}}";
	
	for (var i = 0; i < fieldRequired.length; i++)
	{
		var obj = formobj.elements[fieldRequired[i]];
		if (obj)
		{
			switch(obj.type)
			{
				case "text":
				case "textarea":
					if (obj.value == "" || obj.value == null)
						alertMsg += " - " + lang[fieldRequired[i]] + "\n";
					break;
				default:
			}
			
			if (obj.type == undefined)
			{
				var blnchecked = false;
				for (var j = 0; j < obj.length; j++)
				{
					if (obj[j].checked)
						blnchecked = true;
				}
				
				if (!blnchecked)
					alertMsg += " - " + lang[fieldRequired[i]] + "\n";
			}
		}
	}

	if (alertMsg.length == l_Msg)
		return true;
	else
	{
		alert(alertMsg);
		return false;
	}
}

/*language step*/
$(document).ready(function() {
  $('#choose li').hover(function() {
    $(this).animate( { width: "180", height: "180" }, { queue: false, duration: 100 });
  },
  function() {
    $(this).animate( { width: "80", height: "80" }, { queue: false, duration: 130 });
  });
});

// -->
//]]>

</script>
</head>
<body>
<br />
{{if((isset($_GET['step']) && $_GET['step'] != 'language') && (strpos('index.php', $_SERVER['PHP_SELF'])=== false && isset($_GET['step']))):}}
<form action="?change_lang" method="post">
<img src="style/images/world.png" alt="language" style="float:left;margin:5px 10px;" /> 
<select name="lang" style="float:left" onchange="submit()">
{{if($dh = opendir($_path . 'lang')):}}
{{while (($file = readdir($dh)) !== false): if(strpos($file, '.') === false && $file != '..' && $file != '.'):}}
<option value="{{echo $file}}" {{echo $file==$_GET['lang']?'selected="selected"':''}}>{{echo $file}}</option>
{{endif; endwhile;closedir($dh);endif;}}
</select>
<input type="hidden" name="step_is" value="{{echo htmlspecialchars($_GET['step'])}}" />
</form>
{{endif;}}

<img src="style/images/logo.png" style="border:0;" alt="kleeja" />
<br />

<br />
<fieldset style="margin-left: 10%;margin: 0 auto;width: 724px;position: relative;-moz-border-radius: 8px;border-radius: 1px;">

